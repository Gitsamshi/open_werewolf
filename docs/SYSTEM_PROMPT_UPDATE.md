# System Prompt 更新说明

## 更新时间
2025-10-25

## 更新内容

### 1. 使用专业的狼人杀术语和规则

更新了AI玩家的系统提示词（system prompt），使其更符合狼人杀游戏的专业玩法。

### 2. 主要改进

#### 之前的System Prompt
- 简单的游戏规则说明
- 基础的角色描述
- 通用的策略提示

#### 现在的System Prompt
- ✅ **完整的游戏规则体系**
  - 玩家与角色设置
  - 阵营设置
  - 获胜条件
  - 详细的角色介绍

- ✅ **专业术语系统**
  - 查杀：预言家查验结果为狼人
  - 金水：预言家查验结果为好人
  - 银水：女巫救活的玩家
  - 有身份：角色不是村民
  - 强神：技能厉害的神
  - 悍跳：狼人假装神职
  - 对跳：神职身份争议
  - 刀口：狼人杀死的玩家
  - 挡刀：好人牺牲保护策略
  - 扛推：被投票处决

- ✅ **策略指导增强**
  - 要求使用专业术语发言
  - 狼人可以悍跳神职
  - 好人要逻辑推理
  - 善用游戏策略

### 3. 规则细节修正

#### 女巫规则澄清
- **明确说明**：女巫不能自救
- **解药使用**：可以救其他玩家，但不能救自己
- **毒药使用**：可以毒死除自己外的任意玩家
- **限制**：每晚最多使用一瓶药

### 4. 预期效果

#### AI玩家表现提升
1. **发言更专业**
   - 使用"查杀"而不是"查验出狼人"
   - 使用"金水"而不是"查验出好人"
   - 使用"刀口"而不是"被狼人杀死"

2. **策略更丰富**
   - 狼人会主动悍跳神职
   - 预言家会报查杀和金水
   - 玩家会讨论刀口、银水等信息

3. **逻辑更清晰**
   - 基于专业术语的推理
   - 更符合真实玩家的思维模式
   - 提升游戏真实感

### 5. 更新的文件

- `src/players/player.py` - AI玩家的系统提示词

### 6. 使用示例

#### AI发言对比

**之前的发言风格**：
```
"我昨晚查验了玩家3，他是狼人。"
```

**现在的发言风格**：
```
"我是预言家，昨晚查验3号玩家，给出查杀。"
```

**更专业的发言**：
```
"我是预言家，首夜查验3号，给出查杀。建议今天先出3号。"
```

#### 狼人悍跳示例

**之前**：
```
"我认为玩家5很可疑。"
```

**现在**：
```
"我悍跳预言家，昨晚查验5号给金水。他是我的查验对象，请好人相信我。"
```

## 技术细节

### System Prompt 结构

```python
def _build_system_prompt(self) -> str:
    return """
    ### 玩家与角色设置 ###
    [9人配置说明]
    
    ### 阵营设置 ###
    [狼人阵营 vs 好人阵营]
    
    ### 获胜条件 ###
    [具体胜利条件]
    
    ### 角色介绍 ###
    [5种角色详细说明]
    
    ### 游戏常用语 ###
    [10个专业术语]
    
    ### 你的身份信息 ###
    [玩家编号、名称、角色]
    
    ### 重要提示 ###
    [7条策略建议]
    """
```

## 兼容性

- ✅ 与现有游戏逻辑完全兼容
- ✅ 不影响人类玩家体验
- ✅ 不需要修改其他代码
- ✅ 向后兼容

## 测试建议

1. **测试AI发言质量**
   ```bash
   python main.py
   # 选择0（纯AI观战）
   # 观察AI是否使用专业术语
   ```

2. **测试狼人悍跳**
   - 观察狼人是否会假装预言家
   - 检查对跳场景的处理

3. **测试预言家报验**
   - 检查是否使用"查杀"和"金水"
   - 观察报验的逻辑性

## 未来优化方向

1. **添加更多术语**
   - 警徽：警长的标志
   - 警徽流：预言家的查验顺序
   - 倒钩：狼人投票给狼队友
   - 冲锋：狼人投票给好人

2. **策略细化**
   - 不同板子的打法
   - 高级战术（深水狼、倒钩狼等）
   - 身份判断技巧

3. **动态调整**
   - 根据局势调整发言策略
   - 学习其他玩家的风格
   - 适应不同的游戏阶段

## 总结

这次更新让AI玩家的发言和策略更加专业化，提升了游戏的真实感和趣味性。AI现在能够：

✅ 使用专业狼人杀术语
✅ 理解并执行高级策略
✅ 更像真实玩家的思考方式
✅ 提供更有挑战性的对局

享受更专业的狼人杀游戏体验！🎮
