# 狼人杀游戏项目总结

## 项目概述

这是一个基于Python开发的9人狼人杀游戏，支持人类玩家与AI玩家混合对战。AI玩家由AWS Bedrock提供的多种大语言模型驱动，每个AI都具有独特的思维方式和策略。

## 核心特性

### 1. 完整的游戏实现
- ✅ 9人标准局配置（3狼人+3神职+3村民）
- ✅ 完整的夜晚和白天阶段
- ✅ 所有角色技能实现
- ✅ 遗言和猎人开枪机制
- ✅ 投票和放逐系统

### 2. 灵活的游戏模式
- ✅ 纯AI对战（观战模式）
- ✅ 人类+AI混合对战（1-9人）
- ✅ 支持自定义AI模型分配

### 3. 智能AI系统
- ✅ 9种不同的AI模型
- ✅ AI记忆系统
- ✅ 角色特定的决策逻辑
- ✅ 自然语言交互

### 4. 完善的文档
- ✅ 详细的README
- ✅ 游戏玩法指南
- ✅ 常见问题解答
- ✅ 配置示例

## 项目结构

```
open_werewolf/
├── main.py                      # 主程序入口
├── run.sh                       # 快速启动脚本
├── test_setup.py                # 环境测试脚本
├── config_example.py            # 配置示例
├── requirements.txt             # 项目依赖
├── README.md                    # 项目说明
├── GAMEPLAY.md                  # 游戏玩法
├── FAQ.md                       # 常见问题
├── .env.example                 # 环境变量示例
├── .gitignore                   # Git忽略文件
└── src/
    ├── game/
    │   └── werewolf_game.py    # 游戏核心逻辑
    ├── models/
    │   └── roles.py            # 角色系统
    ├── players/
    │   └── player.py           # 玩家系统
    └── utils/
        └── llm_client.py       # LLM调用模块
```

## 技术栈

- **语言**: Python 3.8+
- **AI服务**: AWS Bedrock
- **依赖**: boto3, botocore
- **设计模式**: 面向对象、工厂模式、策略模式

## AI模型配置

| 角色 | 默认模型 | 特点 |
|------|----------|------|
| 狼人1 | Claude Opus 4 | 最强推理，擅长欺骗 |
| 狼人2 | Claude Sonnet 4.5 | 平衡性能 |
| 狼人3 | Claude Sonnet 3.7 | 良好表现 |
| 预言家 | Claude Opus 4.1 | 最强分析能力 |
| 女巫 | Claude Sonnet 4 | 策略决策 |
| 猎人 | Claude Sonnet 3.5 | 稳定发挥 |
| 村民1 | DeepSeek V3 | 高性价比 |
| 村民2 | DeepSeek R1 | 推理能力强 |
| 村民3 | Claude Haiku 4.5 | 快速响应 |

## 游戏流程

### 夜晚阶段
1. 狼人讨论并击杀
2. 预言家查验身份
3. 女巫使用药水

### 白天阶段
1. 宣布死亡
2. 遗言环节
3. 玩家发言
4. 投票放逐

## 使用方法

### 快速开始
```bash
# 方式1: 使用启动脚本
./run.sh

# 方式2: 直接运行
python main.py

# 方式3: 先测试环境
python test_setup.py
python main.py
```

### 安装依赖
```bash
pip install -r requirements.txt
```

### 配置AWS
```bash
aws configure
# 或设置环境变量
export AWS_ACCESS_KEY_ID=xxx
export AWS_SECRET_ACCESS_KEY=xxx
```

## 核心功能实现

### 1. 角色系统
- 使用抽象基类定义角色接口
- 每个角色有独特的技能和描述
- 工厂方法创建角色实例

### 2. 玩家系统
- 区分人类玩家和AI玩家
- AI玩家具有记忆功能
- 统一的决策接口

### 3. LLM集成
- 支持多种Bedrock模型
- 可配置的模型分配
- 错误处理和重试机制

### 4. 游戏逻辑
- 完整的夜晚/白天循环
- 角色技能触发
- 胜负判定
- 遗言队列管理

## 亮点功能

### 1. AI记忆系统
每个AI玩家都有独立的记忆，能记住：
- 夜晚行动结果
- 白天发言内容
- 死亡信息
- 投票情况

### 2. 智能决策
AI基于：
- 角色身份
- 历史信息
- 当前局势
做出决策

### 3. 自然语言交互
- AI发言自然流畅
- 符合角色特点
- 具有逻辑性

### 4. 灵活配置
- 可自定义模型分配
- 可调整游戏参数
- 支持不同游戏模式

## 测试和调试

### 环境测试
```bash
python test_setup.py
```

测试内容：
- AWS凭证
- Bedrock访问权限
- 模型可用性

### 调试建议
- 查看控制台输出
- 检查AWS CloudWatch日志
- 使用try-except捕获错误

## 性能优化

### 成本优化
- 使用Haiku或DeepSeek模型
- 减少max_tokens
- 优化提示词长度

### 速度优化
- 使用响应快的模型
- 并行处理（未来可实现）
- 缓存常用响应

## 扩展建议

### 短期扩展
1. 添加游戏记录保存
2. 实现PK环节
3. 添加警长机制
4. 支持自定义板子

### 长期扩展
1. 图形界面
2. 网络对战
3. 游戏回放
4. 数据分析
5. AI训练优化

## 已知限制

1. **网络依赖**: 需要稳定的AWS连接
2. **成本考虑**: 使用Opus模型成本较高
3. **响应时间**: AI思考需要时间
4. **规则限制**: 目前只支持9人标准局
5. **平票处理**: 简化为随机选择

## 许可和使用

- 项目仅供学习和娱乐
- 注意AWS使用成本
- 遵守相关服务条款

## 维护和支持

### 常见问题
参见 FAQ.md

### 游戏玩法
参见 GAMEPLAY.md

### 配置示例
参见 config_example.py

## 贡献指南

欢迎：
- 提交Bug报告
- 提出功能建议
- 贡献代码改进
- 分享游戏经验

## 致谢

- AWS Bedrock提供AI能力
- Anthropic的Claude系列模型
- DeepSeek的推理模型

## 总结

这是一个功能完整、设计优雅、易于扩展的狼人杀游戏项目。通过结合多种AI模型，创造了独特的游戏体验。无论是作为娱乐项目还是学习AI应用的示例，都具有很好的价值。

享受游戏吧！
